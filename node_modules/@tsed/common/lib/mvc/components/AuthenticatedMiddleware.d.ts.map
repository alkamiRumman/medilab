{"version":3,"sources":["mvc/components/AuthenticatedMiddleware.ts"],"names":[],"mappings":"AAEA,OAAO,EAAC,YAAY,EAAC,MAAM,mCAAmC,CAAC;AAC/D,OAAO,EAAC,GAAG,EAAC,MAAM,8BAA8B,CAAC;AACjD,OAAO,EAAC,WAAW,EAAC,MAAM,eAAe,CAAC;AAE1C;;;;GAIG;AACH,qBACa,uBAAwB,YAAW,WAAW;IAClD,GAAG,CAAQ,OAAO,EAAE,GAAG,EAAkB,QAAQ,EAAE,YAAY;CAOvE","file":"AuthenticatedMiddleware.d.ts","sourcesContent":["import {Unauthorized} from \"ts-httpexceptions\";\nimport {Middleware} from \"../decorators/class/middleware\";\nimport {EndpointInfo} from \"../decorators/params/endpointInfo\";\nimport {Req} from \"../decorators/params/request\";\nimport {IMiddleware} from \"../interfaces\";\n\n/**\n * This middleware manage the authentication based on passport strategy.\n *\n * @middleware\n */\n@Middleware()\nexport class AuthenticatedMiddleware implements IMiddleware {\n  public use(@Req() request: Req, @EndpointInfo() endpoint: EndpointInfo) {\n    const options = endpoint.get(AuthenticatedMiddleware) || {};\n    // @ts-ignore\n    if (request.isAuthenticated && !request.isAuthenticated(options)) {\n      throw new Unauthorized(\"Unauthorized\");\n    }\n  }\n}\n"],"sourceRoot":"../../../src"}